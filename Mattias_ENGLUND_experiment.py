

## Help ## This script attempts to connect to a specific port on a remote server (scanme.nmap.org) to check if the port is open or closed.
"""
Mattias Experiment Script
Student: Mattias E
Start date: 2025-10-22
"""     
"""
**Vanliga portar:**
- Port 80: HTTP (webbplatser)
- Port 443: HTTPS (säkra webbplatser)
- Port 22: SSH (säker fjärråtkomst)
- Port 21: FTP (filöverföring)
**Mål:** Skapa ett program som kontrollerar om EN specifik port är öppen på EN målvärd.
**Vad du behöver ta reda på:**
1. Hur man importerar och använder Pythons `socket`-bibliotek
2. Hur man skapar en socket-anslutning till en specifik IP-adress och port
3. Hur man avgör om anslutningen lyckades eller misslyckades
4. Hur man hanterar att anslutningen stängs ordentligt
**Testa din kod på:**
- `scanme.nmap.org`
- Port 80
**Frågor att diskutera i din grupp:**
- Vad händer när du försöker ansluta till en stängd port?
- Vilket undantag/fel ger Python dig?
- Varför behöver vi stänga socketen efter testning?
"""
# Steg ett: Kolla en specifik port (22)
import socket  # Gör att vi kan skapa nätverksanslutningar

# Lista med portar att kolla
ports = [22]

# Kollar om en port är öppen
def check_port(host, port):
    s = socket.socket()        # Skapar en "kontakt"
    s.settimeout(1)            # Väntar max 1 sekund
    result = s.connect_ex((host, port))  # Testar anslutning
    s.close()                  # Stänger kontakten

    if result == 0:
        print(f"Port {port} är öppen på {host}")
    else:
        print(f"Port {port} är stängd på {host}")

# Test
host = "scanme.nmap.org"
ports = [22, 80, 443]  # Några vanliga portar
for port in ports:
    check_port(host, port)


#Steg två: Utöka koden för att kolla flera portar (22-100)
"""
 Skannar portar i intervallet [start_port, end_port] 
 på host och skriver ut om varje port är öppen eller stängd.
 Exempel: check_multiple_ports("scanme.nmap.org", 22, 100)
"""
def check_multiple_ports(host: str, start_port: int, end_port: int, timeout: float = 1.0) -> None:
    try:
        ip = socket.gethostbyname(host)
    except socket.gaierror as e:
        print(f"Kunde inte lösa host '{host}': {e}")
        return

    for port in range(start_port, end_port + 1):
        with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as sock:
            sock.settimeout(timeout)
            if sock.connect_ex((ip, port)) == 0:
                print(f"Port {port} är ÖPPEN på {host} ({ip})")
            else:
                print(f"Port {port} är STÄNGD på {host} ({ip})")

# Exempel på användning
if __name__ == "__main__":
    target = "scanme.nmap.org"
    check_multiple_ports(target, 22, 100, timeout=0.8)


# Steg tre: Försök hämta banner från öppna portar




























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































